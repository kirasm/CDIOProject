var label = [];var dataArray = [];var myChart;function loadCharts() {    var ctx = $("#myChart");    myChart = new Chart(ctx, {        type: 'line',        //options: { },        data: {            labels: label,            datasets: [{                lineTension: 0,                pointBorderColor: "rgba(75,192,192,1)",                pointBackgroundColor: "#fff",                pointBorderWidth: 1,                pointHoverRadius: 5,                pointRadius: 1,                fill: true,                data: dataArray            }]        }    });}function reload(SensorID) {    while (label.length > 0 && dataArray.length > 0) {        label.pop();        dataArray.pop();    }    var currentDate = getCurrentDate;    getSensorData(SensorID, '1996-06-08 14:09:53', currentDate);}function getSensorData(sensorID) {    //var lastDate = new Date();    var ajax = $.ajax({        url: 'sensorData.php',        method: 'POST',        data: {sensorID: sensorID, backlog: 200},        dataType: 'json',        success: function (JSONObject) {            var i = 0;            var interval = setInterval(function () {                if (JSONObject[i] == null) {                    clearInterval(interval);                    startAutoUpdate(sensorID, JSONObject[i - 1].Date);                } else {                    //lastDate = JSONObject[i].Date;                    label.push(JSONObject[i].Date);                    dataArray.push(JSONObject[i].Value);                    myChart.update();                    i++;                }            }, 1);        },        error: function (XMLHttpRequest, textStatus, errorThrown) {        }    });}function startAutoUpdate(sensorID, lastDate) {    var lastMeasure = new Date(lastDate);    var nemt = setInterval(function () {        if (!$("#myChart").length) {            clearInterval(nemt);        }        $.ajax({            url: 'sensorData.php',            method: 'POST',            data: {dataSet: "dataSet", sensorID: sensorID, backlog: 1},            dataType: 'json',            success: function (JSONObject) {                var i = 0;                if (lastMeasure < new Date(JSONObject[i].Date)) {                    lastMeasure = new Date(JSONObject[i].Date);                    label.push(JSONObject[i].Date);                    dataArray.push(JSONObject[i].Value);                    myChart.update();                }            },            error: function (XMLHttpRequest, textStatus, errorThrown) {                //alert("Check your password or your internet connection lol  " + textStatus + " " + errorThrown + " " + XMLHttpRequest);            }        });    }, 500);}